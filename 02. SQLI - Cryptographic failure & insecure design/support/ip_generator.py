#!/usr/bin/env python3

import sys


def display_usage():
    print("Usage:")
    print("python3 ip_generator.py [start_ip] [end_ip] [output_file]")
    print("Example:")
    print("python3 ip_generator.py 192.168.0.1 192.168.0.10 ip_list.txt")

def generate_ip_list(start_ip, end_ip):
    start_octets = [int(octet) for octet in start_ip.split('.')]
    end_octets = [int(octet) for octet in end_ip.split('.')]

    ip_list = []

    # Lặp qua từng octet và tạo các địa chỉ IP
    for a in range(start_octets[0], end_octets[0] + 1):
        for b in range(start_octets[1], end_octets[1] + 1):
            for c in range(start_octets[2], end_octets[2] + 1):
                for d in range(start_octets[3], end_octets[3] + 1):
                    ip_address = "{}.{}.{}.{}".format(a, b, c, d)
                    ip_list.append(ip_address)

    return ip_list


def write_ip_list_to_file(ip_list, output_file):
    with open(output_file, 'w') as file:
        for ip in ip_list:
            file.write(ip + '\n')

def main():
    if len(sys.argv) != 4:
        display_usage()
        sys.exit(1)

    start_ip = sys.argv[1]
    end_ip = sys.argv[2]
    output_file = sys.argv[3]

    ip_list = generate_ip_list(start_ip, end_ip)

    write_ip_list_to_file(ip_list, output_file)

    print("Generated IP addresses saved to '{}'".format(output_file))

if __name__ == "__main__":
    main()
